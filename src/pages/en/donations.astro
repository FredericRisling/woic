---
import { getEntry } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';
import Hero from '../../components/ui/Hero.astro';
import Section from '../../components/ui/Section.astro';
import Card from '../../components/ui/Card.astro';
import Container from '../../components/ui/Container.astro';

const lang = 'en';
const pageData = await getEntry('pages', `${lang}/donations`);
---

<BaseLayout
  title={pageData.data.meta.title}
  description={pageData.data.meta.description}
  lang={lang}
>
  <Header slot="default-header" lang={lang} />

  <Hero
    title={pageData.data.hero.title}
    subtitle={pageData.data.hero.subtitle}
  />

  {pageData.data.sections.map(section => {
    if (section.type === 'html' && !section.bankTransfer) {
      return (
        <Section>
          <Container size="md">
            <div class="prose dark:prose-invert max-w-none" set:html={section.html} />
          </Container>
        </Section>
      );
    }

    if (section.type === 'donations') {
      return (
        <Section>
          <Container size="md">
            <div class="grid md:grid-cols-2 gap-8 mb-12">
              <Card>
                <h3 class="text-xl font-bold mb-4 text-neutral-900 dark:text-neutral-100">
                  {section.bankTransfer.title}
                </h3>
                <div class="space-y-2 text-neutral-600 dark:text-neutral-400">
                  <p><strong>Account Holder:</strong> {section.bankTransfer.accountHolder}</p>
                  <p><strong>IBAN:</strong> {section.bankTransfer.iban}</p>
                  <p><strong>BIC:</strong> {section.bankTransfer.bic}</p>
                  <p><strong>Bank:</strong> {section.bankTransfer.bank}</p>
                  <p class="text-sm mt-4">
                    {section.bankTransfer.note}
                  </p>
                </div>
              </Card>

              <Card>
                <h3 class="text-xl font-bold mb-4 text-neutral-900 dark:text-neutral-100">
                  {section.onlineDonation.title}
                </h3>
                <p class="text-neutral-600 dark:text-neutral-400 mb-4">
                  {section.onlineDonation.description}
                </p>
                <button class="w-full px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors">
                  {section.onlineDonation.buttonText}
                </button>
                <p class="text-sm text-neutral-500 dark:text-neutral-400 mt-3">
                  {section.onlineDonation.secureNote}
                </p>
              </Card>
            </div>
          </Container>
        </Section>
      );
    }
  })}

  <Footer slot="default-footer" lang={lang} />
</BaseLayout>
