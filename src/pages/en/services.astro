---
import { getEntry } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';
import Hero from '../../components/ui/Hero.astro';
import Section from '../../components/ui/Section.astro';
import Card from '../../components/ui/Card.astro';
import Container from '../../components/ui/Container.astro';

const lang = 'en';
const pageData = await getEntry('pages', `${lang}/services`);
---

<BaseLayout
  title={pageData.data.meta.title}
  description={pageData.data.meta.description}
  lang={lang}
>
  <Header slot="default-header" lang={lang} />

  <Hero
    title={pageData.data.hero.title}
    subtitle={pageData.data.hero.subtitle}
  />

  {pageData.data.sections.map(section => {
    if (section.type === 'cards') {
      return (
        <Section title={section.title}>
          <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
            {section.cards.map(card => (
              <Card>
                <h3 class="text-2xl font-bold mb-4 text-neutral-900 dark:text-neutral-100">
                  {card.title}
                </h3>
                <p class="text-lg font-semibold text-primary-600 dark:text-primary-400 mb-3">
                  {card.time}
                </p>
                <p class="text-neutral-600 dark:text-neutral-400">
                  {card.description}
                </p>
              </Card>
            ))}
          </div>
        </Section>
      );
    }

    if (section.type === 'html') {
      return (
        <Section title={section.title} background={section.background}>
          <Container size="md">
            <div class="prose dark:prose-invert max-w-none" set:html={section.html} />
          </Container>
        </Section>
      );
    }

    if (section.type === 'text') {
      return (
        <Section title={section.title}>
          <Container size="md">
            <div class="text-center">
              <p class="text-lg text-neutral-600 dark:text-neutral-400 mb-6">
                {section.content}
              </p>
              {section.button && (
                <a
                  href={section.button.href}
                  class="inline-flex items-center px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors"
                >
                  {section.button.text}
                </a>
              )}
            </div>
          </Container>
        </Section>
      );
    }
  })}

  <Footer slot="default-footer" lang={lang} />
</BaseLayout>
