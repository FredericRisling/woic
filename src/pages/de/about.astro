---
import { getEntry } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';
import Hero from '../../components/ui/Hero.astro';
import Section from '../../components/ui/Section.astro';
import Container from '../../components/ui/Container.astro';
import Card from '../../components/ui/Card.astro';
import Button from '../../components/ui/Button.astro';

const lang = 'de';
const pageData = await getEntry('pages', `${lang}/about`);
---

<BaseLayout
  title={pageData.data.meta.title}
  description={pageData.data.meta.description}
  lang={lang}
>
  <Header slot="default-header" lang={lang} />

  <Hero
    title={pageData.data.hero.title}
    subtitle={pageData.data.hero.subtitle}
  />

  {pageData.data.sections.map(section => {
    if (section.type === 'cards') {
      return (
        <Section title={section.title} background={section.background}>
          <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
            {section.cards?.map(card => (
              <Card>
                <h3 class="text-xl font-bold mb-2 text-neutral-900 dark:text-neutral-100">
                  {card.title}
                </h3>
                {card.time && (
                  <p class="text-sm font-semibold text-primary-600 dark:text-primary-400 mb-3">
                    {card.time}
                  </p>
                )}
                <p class="text-neutral-600 dark:text-neutral-400 mb-4">
                  {card.description}
                </p>
                {card.button && (
                  <Button href={card.button.href} variant="primary" class="w-full">
                    {card.button.label}
                  </Button>
                )}
              </Card>
            ))}
          </div>
        </Section>
      );
    }

    return (
      <Section title={section.title} background={section.background}>
        <Container size="md">
          <div class="prose dark:prose-invert max-w-none" set:html={section.html} />
        </Container>
      </Section>
    );
  })}

  <Footer slot="default-footer" lang={lang} />
</BaseLayout>
